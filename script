<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Koło Fortuny</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f0f0f0;
    }
    .wheel-container {
      position: relative;
      width: 600px;
      height: 600px;
      margin: 100px auto;
      border-radius: 50%;
      overflow: hidden;
      border: 10px solid #333;
    }
    .wheel {
      position: absolute;
      width: 100%;
      height: 100%;
      transform-origin: center center;
      background: conic-gradient(
        red 0deg 90deg,
        blue 90deg 180deg,
        yellow 180deg 270deg,
        green 270deg 360deg
      );
    }
    .pointer {
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%) rotate(180deg);
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 30px solid black;
      z-index: 20;
      pointer-events: none;
    }
	.pointer.gray {
	  border-bottom-color: #333;
	}
    .pointer.black {
      border-bottom-color: black;
    }
    .spin-button {
      padding: 15px 30px;
      font-size: 18px;
      cursor: pointer;
      background-color: #333;
      color: white;
      border: none;
      border-radius: 5px;
      margin-top: 20px;
      transition: background-color 0.3s;
    }
    .spin-button:hover {
      background-color: #555;
    }
  </style>
</head>
<body>

  <div class="wheel-container">
    <div class="pointer gray"></div>
    <div class="wheel" id="wheel"></div>
  </div>
  <button class="spin-button" onclick="spinWheel()">Obróć Koło</button>

  <script>
    let rotation = 0;
    let spinning = false;
    let interval;
    let customSpin = false;

    function spinWheel() {
      if (spinning) return;
      spinning = true;

      const wheel = document.getElementById("wheel");
      let degrees;
      let speed;

      if (customSpin) {
        degrees = 25 * 180;
        speed = 6;
      } else {
        const minTurns = 10;
        const maxTurns = 15;
        const fullRotation = 360;

        const turns = Math.random() * (maxTurns - minTurns) + minTurns;
        degrees = turns * fullRotation;

        speed = Math.random() * 1.5 + 4;
      }

      wheel.style.transition = `transform ${speed}s cubic-bezier(0.25, 0.8, 0.25, 1)`;
      rotation += degrees;
      wheel.style.transform = `rotate(${rotation}deg)`;

      clearInterval(interval);

      setTimeout(() => {
        spinning = false;
        setLightSpin();
      }, speed * 1000 + 5000);
    }

    function setLightSpin() {
      interval = setInterval(() => {
        rotation += 0.25;
        document.getElementById("wheel").style.transform = `rotate(${rotation}deg)`;
      }, 16);
    }

    document.addEventListener("keydown", (e) => {
      if (e.shiftKey && e.key.toLowerCase() === "g") {
        customSpin = !customSpin;

        const pointer = document.querySelector(".pointer");
        pointer.classList.toggle("gray", !customSpin);
        pointer.classList.toggle("black", customSpin);
      }
    });

    setLightSpin();
  </script>

</body>
</html>
